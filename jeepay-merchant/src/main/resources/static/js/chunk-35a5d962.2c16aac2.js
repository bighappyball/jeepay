(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35a5d962"],{"0fea":function(e,t,n){"use strict";n.d(t,"G",(function(){return o})),n.d(t,"H",(function(){return a})),n.d(t,"k",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"l",(function(){return u})),n.d(t,"n",(function(){return c})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"m",(function(){return y})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return E})),n.d(t,"M",(function(){return T})),n.d(t,"r",(function(){return S})),n.d(t,"J",(function(){return C})),n.d(t,"u",(function(){return A})),n.d(t,"C",(function(){return w})),n.d(t,"D",(function(){return O})),n.d(t,"p",(function(){return x})),n.d(t,"w",(function(){return R})),n.d(t,"v",(function(){return I})),n.d(t,"x",(function(){return k})),n.d(t,"y",(function(){return q})),n.d(t,"t",(function(){return W})),n.d(t,"L",(function(){return N})),n.d(t,"K",(function(){return G})),n.d(t,"z",(function(){return L})),n.d(t,"A",(function(){return P})),n.d(t,"E",(function(){return _})),n.d(t,"F",(function(){return D})),n.d(t,"q",(function(){return B})),n.d(t,"o",(function(){return U})),n.d(t,"s",(function(){return $})),n.d(t,"B",(function(){return J})),n.d(t,"I",(function(){return M}));n("2ca0"),n("ac1f"),n("5319");var r=n("4667"),o={list:function(e,t){return r["a"].request({url:e,method:"GET",params:t},!0,!0,!1)},add:function(e,t){return r["a"].request({url:e,method:"POST",data:t},!0,!0,!1)},getById:function(e,t){return r["a"].request({url:e+"/"+t,method:"GET"},!0,!0,!1)},updateById:function(e,t,n){return r["a"].request({url:e+"/"+t,method:"PUT",data:n},!0,!0,!1)},delById:function(e,t){return r["a"].request({url:e+"/"+t,method:"DELETE"},!0,!0,!1)}},a={list:function(e,t){return r["a"].request({url:e,method:"GET",params:t},!0,!0,!0)},add:function(e,t){return r["a"].request({url:e,method:"POST",data:t},!0,!0,!0)},getById:function(e,t){return r["a"].request({url:e+"/"+t,method:"GET"},!0,!0,!0)},updateById:function(e,t,n){return r["a"].request({url:e+"/"+t,method:"PUT",data:n},!0,!0,!0)},delById:function(e,t){return r["a"].request({url:e+"/"+t,method:"DELETE"},!0,!0,!0)}},i="/api/sysRoles",s="/api/sysRoleEntRelas",u="/api/sysUsers",c="/api/sysUserRoleRelas",d="api/mainChart",p="/api/mchApps",l="/api/payOrder",f="/api/refundOrder",h="/api/payWays",m="/api/mch/payConfigs",v="/api/mch/payPassages",y="/api/transferOrders",b="/api/divisionReceiverGroups",g="/api/divisionReceivers",E="/api/division/records",T={avatar:r["a"].baseUrl+"/api/ossFiles/avatar",cert:r["a"].baseUrl+"/api/ossFiles/cert"};function S(){return r["a"].request({url:"/api/sysEnts/showTree",method:"GET"})}function C(e,t){return r["a"].request({url:"api/sysUserRoleRelas/relas/"+e,method:"POST",data:{roleIdListStr:JSON.stringify(t)}})}function A(e,t){return r["a"].request({url:"/api/mch/payConfigs/"+e+"/"+t,method:"get"})}function w(e){return r["a"].request({url:"api/paytest/payways/"+e,method:"GET"})}function O(e){return r["a"].request({url:"/api/paytest/payOrders",method:"POST",data:e})}function x(e,t){return r["a"].request({url:"/api/mch/payPassages/availablePayInterface/"+e+"/"+t,method:"GET"})}function R(){return r["a"].request({url:d+"/payAmountWeek",method:"GET"})}function I(){return r["a"].request({url:d+"/numCount",method:"GET"})}function k(e){return r["a"].request({url:d+"/payCount",method:"GET",params:e})}function q(e){return r["a"].request({url:d+"/payTypeCount",method:"GET",params:e})}function W(){return r["a"].request({url:d,method:"GET"})}function N(e){return r["a"].request({url:"/api/current/modifyPwd",method:"put",data:e})}function G(e){return r["a"].request({url:"/api/current/user",method:"put",data:e})}function L(){return r["a"].request({url:"/api/current/user",method:"get"})}function P(){var e=document.location.protocol+"//"+document.location.host;return e.startsWith("https:")?"wss://"+e.replace("https://",""):"ws://"+e.replace("http://","")}function _(e){return r["a"].request({url:"/api/mch/payConfigs/alipayIsvsubMchAuthUrls/"+e,method:"GET"})}function D(e){return r["a"].request({url:"api/mchTransfers/ifCodes/"+e,method:"GET"})}function B(e,t,n){return r["a"].request({url:"/api/mchTransfers/channelUserId",method:"GET",params:{ifCode:e,appId:t,extParam:n}})}function U(e){return r["a"].request({url:"/api/mchTransfers/doTransfer",method:"POST",data:e},!0,!0,!0)}function $(e){return r["a"].request({url:"/api/mch/payConfigs/ifCodes/"+e,method:"GET"},!0,!0,!0)}function J(e,t,n){return r["a"].request({url:"/api/payOrder/refunds/"+e,method:"POST",data:{refundAmount:t,refundReason:n}})}function M(e){return r["a"].request({url:"/api/division/records/resend/"+e,method:"POST"})}},"6bf0":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:"等待支付",footer:null,width:300},on:{ok:e.handleClose},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("div",{staticStyle:{width:"100%","margin-bottom":"20px","text-align":"center"}},["codeImgUrl"==e.apiRes.payDataType?r("img",{attrs:{src:e.apiRes.payData,alt:""}}):"payurl"==e.apiRes.payDataType?r("span",[e._v("等待用户支付 "),r("hr"),e._v(" 如浏览器未正确跳转请点击： "),r("a",{attrs:{href:e.apiRes.payData,target:"_blank"}},[e._v("支付地址")]),r("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.apiRes.payData,expression:"apiRes.payData",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],staticClass:"copy-btn",attrs:{size:"small"}},[e._v("复制链接")])],1):r("span",[e._v("等待用户支付,请稍后")])]),r("p",{staticClass:"describe"},[r("img",{directives:[{name:"show",rawName:"v-show",value:e.wxApp,expression:"wxApp"}],attrs:{src:n("866f"),alt:""}}),r("img",{directives:[{name:"show",rawName:"v-show",value:e.aliApp,expression:"aliApp"}],attrs:{src:n("955d"),alt:""}}),r("span",[e._v(e._s(e.payText))])])])],1)},o=[],a=n("d04d"),i=n.n(a),s=n("0fea"),u={name:"PayTestModal",data:function(){return{visible:!1,payText:"",wxApp:!1,aliApp:!1,apiRes:{},payOrderWebSocket:null}},methods:{onCopy:function(){this.$message.success("复制成功")},showModal:function(e,t){var n=this.$createElement,r=this;if(this.payOrderWebSocket&&this.payOrderWebSocket.close(),this.apiRes=t,this.wxApp=!1,this.aliApp=!1,this.visible=!0,this.payText="","WX_NATIVE"===e||"WX_JSAPI"===e?(this.wxApp=!0,this.payText='请使用微信"扫一扫"扫码支付'):"ALI_QR"===e||"ALI_JSAPI"===e?(this.aliApp=!0,this.payText='请使用支付宝"扫一扫"扫码支付'):"QR_CASHIER"===e&&(this.wxApp=!0,this.aliApp=!0,this.payText="支持微信、支付宝扫码"),2!==t.orderState&&3!==t.orderState)"WX_H5"===e||"ALI_WAP"===e?this.payText="请复制链接到手机端打开":"payurl"===t.payDataType&&window.open(t.payData),r.$emit("closeBarCode"),this.payOrderWebSocket=new i.a(Object(s["A"])()+"/api/anon/ws/payOrder/"+t.payOrderId+"/"+(new Date).getTime()),this.payOrderWebSocket.onopen=function(){},this.payOrderWebSocket.onmessage=function(e){var o=JSON.parse(e.data);if(2===o.state){r.handleClose();var a=r.$infoBox.modalSuccess("支付成功",n("div",["2s后自动关闭..."]));setTimeout((function(){a.destroy()}),2e3)}else r.handleClose(),r.$infoBox.modalError("支付失败",n("div",[n("div",["错误码：",t.errCode]),n("div",["错误信息：",t.errMsg])]))};else if(2===t.orderState){r.handleClose();var o=r.$infoBox.modalSuccess("支付成功",n("div",["2s后自动关闭..."]));setTimeout((function(){o.destroy()}),2e3),r.$emit("closeBarCode")}else 3===t.orderState&&(r.handleClose(),r.$emit("closeBarCode"),r.$infoBox.modalError("支付失败",n("div",[n("div",["错误码：",t.errCode]),n("div",["错误信息：",t.errMsg])])))},handleClose:function(e){this.payOrderWebSocket&&this.payOrderWebSocket.close(),this.visible=!1}}},c=u,d=(n("cd15"),n("2877")),p=Object(d["a"])(c,r,o,!1,null,"2be1f7ba",null);t["default"]=p.exports},"866f":function(e,t,n){e.exports=n.p+"assets/wx_app.63e76b4e.svg"},"955d":function(e,t,n){e.exports=n.p+"assets/ali_app.4503cabe.svg"},cd15:function(e,t,n){"use strict";n("f963")},d04d:function(e,t,n){var r,o,a;(function(n,i){o=[],r=i,a="function"===typeof r?r.apply(t,o):r,void 0===a||(e.exports=a)})(0,(function(){if("WebSocket"in window)return e.prototype.onopen=function(e){},e.prototype.onclose=function(e){},e.prototype.onconnecting=function(e){},e.prototype.onmessage=function(e){},e.prototype.onerror=function(e){},e.debugAll=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e;function e(t,n,r){var o={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null};for(var a in r||(r={}),o)"undefined"!==typeof r[a]?this[a]=r[a]:this[a]=o[a];this.url=t,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var i,s=this,u=!1,c=!1,d=document.createElement("div");function p(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}d.addEventListener("open",(function(e){s.onopen(e)})),d.addEventListener("close",(function(e){s.onclose(e)})),d.addEventListener("connecting",(function(e){s.onconnecting(e)})),d.addEventListener("message",(function(e){s.onmessage(e)})),d.addEventListener("error",(function(e){s.onerror(e)})),this.addEventListener=d.addEventListener.bind(d),this.removeEventListener=d.removeEventListener.bind(d),this.dispatchEvent=d.dispatchEvent.bind(d),this.open=function(t){if(i=new WebSocket(s.url,n||[]),t){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else d.dispatchEvent(p("connecting")),this.reconnectAttempts=0;(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var r=i,o=setTimeout((function(){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),c=!0,r.close(),c=!1}),s.timeoutInterval);i.onopen=function(n){clearTimeout(o),(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=i.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var r=p("open");r.isReconnect=t,t=!1,d.dispatchEvent(r)},i.onclose=function(n){if(clearTimeout(o),i=null,u)s.readyState=WebSocket.CLOSED,d.dispatchEvent(p("close"));else{s.readyState=WebSocket.CONNECTING;var r=p("connecting");r.code=n.code,r.reason=n.reason,r.wasClean=n.wasClean,d.dispatchEvent(r),t||c||((s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),d.dispatchEvent(p("close")));var o=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout((function(){s.reconnectAttempts++,s.open(!0)}),o>s.maxReconnectInterval?s.maxReconnectInterval:o)}},i.onmessage=function(t){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,t.data);var n=p("message");n.data=t.data,d.dispatchEvent(n)},i.onerror=function(t){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,t),d.dispatchEvent(p("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(t){if(i)return(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,t),i.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){"undefined"==typeof e&&(e=1e3),u=!0,i&&i.close(e,t)},this.refresh=function(){i&&i.close()}}}))},f963:function(e,t,n){}}]);